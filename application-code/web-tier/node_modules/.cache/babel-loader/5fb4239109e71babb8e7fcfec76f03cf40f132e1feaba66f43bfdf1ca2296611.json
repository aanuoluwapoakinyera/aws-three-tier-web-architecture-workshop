{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/new-project/aws-three-tier-web-architecture-workshop/application-code/web-tier/src/components/DatabaseDemo/DatabaseDemo.js\";\nimport React, { Component } from 'react';\nimport './DatabaseDemo.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass DatabaseDemo extends Component {\n  constructor(props) {\n    super(props);\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n    this.handleButtonClickDel = this.handleButtonClickDel.bind(this);\n    this.handleButtonClickDelAll = this.handleButtonClickDelAll.bind(this);\n    this.state = {\n      transactions: [],\n      text_amt: \"\",\n      text_desc: \"\"\n    };\n  }\n  componentDidMount() {\n    this.populateData();\n  }\n  populateData() {\n    this.fetch_retry('http://35.183.14.187:4000/transaction', 3) // Corrected endpoint\n    .then(res => res.json()).then(data => {\n      this.setState({\n        transactions: data.result\n      });\n      console.log(\"state set\");\n      console.log(this.state.transactions);\n    }).catch(console.log);\n  }\n\n  // ... (fetch_retry method as before)\n\n  handleButtonClickDel() {\n    // This method now deletes a single transaction by ID\n    const requestOptions = {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: this.state.transactions[0].id\n      }) // Send the ID of the first transaction\n    };\n    fetch('http://35.183.14.187:4000/transaction/id', requestOptions) // Corrected endpoint\n    .then(response => response.json()).then(data => this.populateData()).then(() => this.setState({\n      text_amt: \"\",\n      text_desc: \"\",\n      transaction: []\n    }));\n  }\n  handleButtonClickDelAll() {\n    // New method to delete all transactions\n    const requestOptions = {\n      method: 'DELETE'\n    };\n    fetch('http://35.183.14.187:4000/transaction', requestOptions) // Corrected endpoint\n    .then(response => response.json()).then(data => this.populateData()).then(() => this.setState({\n      text_amt: \"\",\n      text_desc: \"\",\n      transaction: []\n    }));\n  }\n  handleButtonClick() {\n    // ... (rest of handleButtonClick method as before)\n    fetch('http://35.183.14.187:4000/transaction', requestOptions) // Corrected endpoint\n    .then(response => response.json()).then(data => this.populateData()).then(() => this.setState({\n      text_amt: \"\",\n      text_desc: \"\"\n    }));\n  }\n  handleTextChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        id: \"title\",\n        style: {\n          paddingRight: \"1em\"\n        },\n        children: \"Aurora Database Demo Page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          float: \"right\",\n          marginBottom: \"1em\"\n        },\n        type: \"button\",\n        value: \"DEL\",\n        onClick: this.handleButtonClickDel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 91\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        id: \"transactions\",\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"AMOUNT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"DESC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"button\",\n                value: \"ADD\",\n                onClick: this.handleButtonClick\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"text_amt\",\n                value: this.state.text_amt,\n                onChange: this.handleTextChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"text_desc\",\n                value: this.state.text_desc,\n                onChange: this.handleTextChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this), this.renderTableData()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this);\n  }\n}\nexport default DatabaseDemo;","map":{"version":3,"names":["React","Component","jsxDEV","_jsxDEV","DatabaseDemo","constructor","props","handleTextChange","bind","handleButtonClick","handleButtonClickDel","handleButtonClickDelAll","state","transactions","text_amt","text_desc","componentDidMount","populateData","fetch_retry","then","res","json","data","setState","result","console","log","catch","requestOptions","method","headers","body","JSON","stringify","id","fetch","response","transaction","e","target","name","value","render","children","style","paddingRight","fileName","_jsxFileName","lineNumber","columnNumber","float","marginBottom","type","onClick","onChange","renderTableData"],"sources":["/home/ubuntu/new-project/aws-three-tier-web-architecture-workshop/application-code/web-tier/src/components/DatabaseDemo/DatabaseDemo.js"],"sourcesContent":["    import React, { Component } from 'react';\n    import './DatabaseDemo.css';\n\n    class DatabaseDemo extends Component {\n    constructor(props) {\n        super(props);\n        this.handleTextChange = this.handleTextChange.bind(this);\n        this.handleButtonClick = this.handleButtonClick.bind(this);\n        this.handleButtonClickDel = this.handleButtonClickDel.bind(this);\n        this.handleButtonClickDelAll = this.handleButtonClickDelAll.bind(this); \n        this.state = {\n        transactions: [],\n        text_amt: \"\",\n        text_desc: \"\"\n        };\n    }\n\n    componentDidMount() {\n        this.populateData();\n    }\n\n    populateData() {\n        this.fetch_retry('http://35.183.14.187:4000/transaction', 3) // Corrected endpoint\n        .then(res => res.json())\n        .then((data) => {\n            this.setState({ transactions: data.result });\n            console.log(\"state set\");\n            console.log(this.state.transactions);\n        })\n        .catch(console.log);\n    }\n\n    // ... (fetch_retry method as before)\n\n    handleButtonClickDel() {\n        // This method now deletes a single transaction by ID\n        const requestOptions = {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' }, \n        body: JSON.stringify({ id: this.state.transactions[0].id }) // Send the ID of the first transaction\n        };\n        fetch('http://35.183.14.187:4000/transaction/id', requestOptions) // Corrected endpoint\n        .then(response => response.json())\n        .then(data => this.populateData())\n        .then(() => this.setState({ text_amt: \"\", text_desc: \"\", transaction: [] }));\n    }\n\n    handleButtonClickDelAll() { \n        // New method to delete all transactions\n        const requestOptions = {\n        method: 'DELETE'\n        };\n        fetch('http://35.183.14.187:4000/transaction', requestOptions) // Corrected endpoint\n        .then(response => response.json())\n        .then(data => this.populateData())\n        .then(() => this.setState({ text_amt: \"\", text_desc: \"\", transaction: [] }));\n    }\n\n    handleButtonClick() {\n        // ... (rest of handleButtonClick method as before)\n        fetch('http://35.183.14.187:4000/transaction', requestOptions) // Corrected endpoint\n        .then(response => response.json())\n        .then(data => this.populateData())\n        .then(() => this.setState({ text_amt: \"\", text_desc: \"\" }));\n    }\n\n    handleTextChange(e){\n        this.setState({[e.target.name]:e.target.value})\n     }\n\n\n            render () {\n            return (\n                <div>\n                <h1 id='title' style={{paddingRight:\"1em\"}}>Aurora Database Demo Page</h1><input style={{float:\"right\", marginBottom:\"1em\"}} type = \"button\" value =\"DEL\" onClick={this.handleButtonClickDel} />\n                <table id='transactions'>\n                <tbody>\n                    <tr>\n                        <td>ID</td>\n                        <td>AMOUNT</td>\n                        <td>DESC</td>\n                    </tr>\n                    <tr>\n                            <td><input type = \"button\" value =\"ADD\" onClick={this.handleButtonClick}/></td>\n                            <td><input type=\"text\" name =\"text_amt\" value = {this.state.text_amt} onChange={this.handleTextChange}/></td>\n                            <td><input type=\"text\" name = \"text_desc\" value = {this.state.text_desc} onChange={this.handleTextChange}/></td>\n                    </tr>\n                    {this.renderTableData()}\n                </tbody>\n                </table>\n            </div>\n\n            );\n        }\n\n    }\n\n    export default DatabaseDemo;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}